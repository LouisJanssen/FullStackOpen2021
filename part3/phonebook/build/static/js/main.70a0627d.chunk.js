(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(14),r=t.n(c),a=t(3),u=t(1),o=t(4),i=t.n(o),s="/api/persons",l=function(){return i.a.get(s).then((function(e){return e.data}))},d=function(e){return i.a.post(s,e).then((function(e){return e.data}))},j=function(e){return i.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.data}))},b=function(e,n){return i.a.put("".concat(s,"/").concat(e),n)},m=t(0),f=function(e){var n=e.value,t=e.onChange;return Object(m.jsxs)("div",{children:["Filter shown with: ",Object(m.jsx)("input",{value:n,onChange:t})]})},h=function(e){var n=e.name,t=e.number,c=e.nameChange,r=e.numberChange,a=e.action;return Object(m.jsxs)("form",{onSubmit:a,className:"numberForm",children:[Object(m.jsxs)("div",{className:"entryForm",children:["Name: ",Object(m.jsx)("input",{value:n,onChange:c})]}),Object(m.jsxs)("div",{className:"entryForm",children:["Number: ",Object(m.jsx)("input",{value:t,onChange:r})]}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{type:"submit",children:"Add"})})]})},O=function(e){var n=e.persons,t=e.filter,c=e.deleteName;return Object(m.jsx)("ul",{className:"numbers",children:""!==t?n.map((function(e){return Object(m.jsxs)("li",{children:[e.name," ",e.number," ",Object(m.jsx)("button",{onClick:function(){c(e.id)},children:"Delete"})]},e.name)})).filter((function(e){return e.key.includes(t)})):n.map((function(e){return Object(m.jsxs)("li",{children:[e.name," ",e.number," ",Object(m.jsx)("button",{onClick:function(){c(e.id)},children:"Delete"})]},e.name)}))})},x=function(e){var n=e.message;return null===n?null:n.includes("Error")?Object(m.jsx)("div",{className:"error",children:n}):Object(m.jsx)("div",{className:"message",children:n})},p=function(){return Object(m.jsxs)("div",{className:"Footer",children:[Object(m.jsx)("p",{children:"Copyright \xa9 Louis Janssen 2021"}),Object(m.jsx)("p",{children:"For the Helsinki's Full Stack Open course"})]})},v=function(){var e=Object(u.useState)([]),n=Object(a.a)(e,2),t=n[0],c=n[1],r=Object(u.useState)(""),o=Object(a.a)(r,2),i=o[0],s=o[1],v=Object(u.useState)(""),g=Object(a.a)(v,2),N=g[0],C=g[1],k=Object(u.useState)(""),w=Object(a.a)(k,2),y=w[0],F=w[1],S=Object(u.useState)(null),T=Object(a.a)(S,2),E=T[0],D=T[1];Object(u.useEffect)((function(){l().then((function(e){c(e)}))}),[]);return Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)("h2",{className:"Title",children:"Phonebook"}),Object(m.jsxs)("div",{className:"content",children:[Object(m.jsx)(x,{message:E}),Object(m.jsx)(f,{value:y,onChange:function(e){F(e.target.value)}}),Object(m.jsx)("h3",{children:"Add a new number"}),Object(m.jsx)(h,{name:i,number:N,nameChange:function(e){s(e.target.value)},numberChange:function(e){C(e.target.value)},action:function(e){e.preventDefault();var n={name:i,number:N},r=t.filter((function(e){return e.name===i}));t.map((function(e){return e.name})).find((function(e){return e===i}))?window.confirm("".concat(i," is already added to phonebook, do you want to change the number ?"))?b(r[0].id,n).then((function(){l().then((function(e){c(e)})),s(""),C(""),D("".concat(r[0].name," number updated")),setTimeout((function(){D(null)}),5e3)})).catch((function(){D("Error: ".concat(r[0].name," already updated")),setTimeout((function(){D(null)}),5e3)})):(s(""),C("")):d(n).then((function(e){c(t.concat(e)),s(""),C(""),D("".concat(e.name," added")),setTimeout((function(){D(null)}),5e3)})).catch((function(e){D("Error: ".concat(e.response.data.error)),setTimeout((function(){D(null)}),5e3)}))}}),Object(m.jsx)("h3",{children:"Numbers"}),Object(m.jsx)(O,{persons:t,filter:y,deleteName:function(e){var n=t.filter((function(n){return n.id===e})),r=n[0].name,a=n[0].id;window.confirm("Do you want to delete ".concat(r," number ?"))&&j(a).then((function(){c(t.filter((function(e){return e.id!==a}))),D("".concat(r," deleted")),setTimeout((function(){D(null)}),5e3)})).catch((function(){D("Error: ".concat(n[0].name," already deleted")),setTimeout((function(){D(null)}),5e3)}))}})]}),Object(m.jsx)(p,{})]})};t(38);r.a.render(Object(m.jsx)(v,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.70a0627d.chunk.js.map